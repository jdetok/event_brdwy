ServerName localhost
ServerRoot "/usr/local/apache2"

Listen 80

LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule ssl_module modules/mod_ssl.so
LoadModule dir_module modules/mod_dir.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule headers_module modules/mod_headers.so
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
LoadModule alias_module modules/mod_alias.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule unixd_module modules/mod_unixd.so
LoadModule mime_module modules/mod_mime.so

<VirtualHost *:80>
    DocumentRoot "/usr/local/apache2/htdocs/static"

    # Serve static files
    # Alias /static "/usr/local/apache2/htdocs/static"
    <Directory "/usr/local/apache2/htdocs/static">
        Require all granted
        DirectoryIndex index.html
    </Directory>

    # Optional: allow serving index.html from root
    # <Directory "/usr/local/apache2/htdocs">
    #     Require all granted
    # </Directory>

    AddType text/html .html
    AddType text/css  .css
    AddType application/javascript .js


    # No caching for static assets
    <FilesMatch "\.(html|css|js)$">
        Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    </FilesMatch>

    # Security headers
    Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header always set X-XSS-Protection "1; mode=block"
</VirtualHost>


# # ServerName localhost
# ServerRoot "/usr/local/apache2"

# ServerName dev.eob.local

# Listen 80

# LoadModule mpm_event_module modules/mod_mpm_event.so
# LoadModule authz_core_module modules/mod_authz_core.so
# LoadModule ssl_module modules/mod_ssl.so
# LoadModule proxy_module modules/mod_proxy.so
# LoadModule proxy_http_module modules/mod_proxy_http.so
# LoadModule headers_module modules/mod_headers.so
# LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
# LoadModule alias_module modules/mod_alias.so
# LoadModule log_config_module modules/mod_log_config.so
# LoadModule unixd_module modules/mod_unixd.so

# <VirtualHost *:80>

#     # Serve /static from local files
#     Alias /static "/usr/local/apache2/htdocs/static"
#     <Directory "/usr/local/apache2/htdocs/static">
#         Require all granted
#     </Directory>

#     # Proxy everything else
#     # ProxyPassMatch ^/(?!static/)(.*)$ http://dev-apache-eob:3333/$1
#     # ProxyPreserveHost On

#     # No caching for static
#     <FilesMatch "\.(html|css|js)$">
#         Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
#     </FilesMatch>

#     # Security headers
#     Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
#     Header always set X-Content-Type-Options "nosniff"
#     Header always set X-Frame-Options "DENY"
#     Header always set X-XSS-Protection "1; mode=block"
# </VirtualHost>
